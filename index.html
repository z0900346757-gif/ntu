<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>æ€¡éœ 20æ­²ç”Ÿæ—¥å¿«æ¨‚ ğŸ‰</title>

<style>
:root { 
  --bg1: #0b1020; --bg2: #1a2a6c; --gold: #fdbb2d;
}

* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

body {
  margin: 0; min-height: 100vh; display: grid; place-items: center;
  font-family: system-ui, -apple-system, "Noto Sans TC", sans-serif;
  color: #fff; overflow: hidden;
  background: linear-gradient(-45deg, #0b1020, #1a2a6c, #2b1055, #192236);
  background-size: 400% 400%;
  animation: gradientMove 15s ease infinite;
}

@keyframes gradientMove {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.card {
  width: min(92vw, 500px); padding: 40px 25px; border-radius: 30px;
  background: rgba(255, 255, 255, 0.07);
  backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.18);
  box-shadow: 0 25px 50px rgba(0,0,0,0.4);
  position: relative; text-align: center; min-height: 300px;
  display: flex; flex-direction: column; justify-content: center;
}

/* æ¨™é¡Œèˆ‡å‰¯æ¨™é¡Œ */
#main-header h1 { margin: 0 0 10px; font-size: clamp(28px, 6vw, 42px); }
#main-header p { margin: 0 0 30px; opacity: 0.8; font-size: 15px; }

/* æŒ‰éˆ• */
#go {
  padding: 16px 40px; border-radius: 50px; border: 0; cursor: pointer;
  font-weight: 800; font-size: 18px; color: #332200;
  background: linear-gradient(45deg, var(--gold), #ff8e53);
  box-shadow: 0 10px 20px rgba(253, 187, 45, 0.3);
  align-self: center;
}

/* æ˜Ÿæ˜Ÿ */
.click-star {
  width: 80px; height: 80px; background: var(--gold); margin: 20px auto;
  clip-path: polygon(50% 0%,61% 35%,98% 35%,68% 57%,79% 91%,50% 70%,21% 91%,32% 57%,2% 35%,39% 35%);
  cursor: pointer; animation: star-pulse 1.5s infinite;
  filter: drop-shadow(0 0 15px var(--gold));
}
@keyframes star-pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.15); } }

/* å€’æ•¸ */
.countdown {
  font-size: clamp(40px, 10vw, 60px); font-weight: 900;
  text-shadow: 0 0 20px var(--gold); animation: pop 0.5s ease;
}
@keyframes pop { from { transform: scale(0.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }

/* çˆ†ç™¼æ–‡å­— */
.burst-text {
  position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
  width: 100%; font-size: 26px; font-weight: bold; color: var(--gold);
  text-shadow: 0 0 15px rgba(255,217,102,0.8); pointer-events: none;
}

/* ç¥ç¦å€å¡Š */
.secret {
  display: none; padding: 10px; line-height: 1.8; text-align: left;
}
.secret h2 { color: var(--gold); margin-top: 0; font-size: 22px; }
#signature { text-align: right; margin-top: 15px; font-weight: bold; color: var(--gold); opacity: 0; }
</style>
</head>

<body>
<div class="card">
  <div id="content-wrap">
    <div id="main-header">
      <h1>ğŸ‚ ç”Ÿæ—¥å¿«æ¨‚</h1>
      <p>ä¸€å€‹å°å°çš„ 20 æ­²ç”Ÿæ—¥ç¥ç¦ã€‚</p>
    </div>
    <button id="go">é»æ“Šé–‹å•Ÿ ğŸµ</button>
  </div>

  <div class="secret" id="secret">
    <h2 id="type-title"></h2>
    <p style="font-size: 0.85em; opacity: 0.6; margin-bottom: 10px;">2026 / 01 / 20</p>
    <div id="type-content"></div>
    <p id="signature"></p>
  </div>

  <audio id="bgmLoop" src="bg.wav" preload="auto" loop playsinline></audio>
</div>

<script>
const goBtn = document.getElementById("go");
const contentWrap = document.getElementById("content-wrap");
const mainHeader = document.getElementById("main-header");
const secret = document.getElementById("secret");
const bgmLoop = document.getElementById("bgmLoop");

function vibrate(p) { if(navigator.vibrate) navigator.vibrate(p); }

function fireConfetti() {
  const colors = ['#fdbb2d', '#ff8e53', '#22c1c3', '#ffffff'];
  for (let i = 0; i < 50; i++) {
    const p = document.createElement('div');
    p.style.cssText = `position:fixed; left:${Math.random()*100}vw; top:-10px; width:8px; height:12px; background:${colors[Math.floor(Math.random()*colors.length)]}; z-index:100; opacity:${Math.random()}; transform:rotate(${Math.random()*360}deg); pointer-events:none; transition:transform 3s linear, opacity 3s;`;
    document.body.appendChild(p);
    setTimeout(() => {
      p.style.transform = `translate(${Math.random()*100-50}px, 105vh) rotate(${Math.random()*1000}deg)`;
      p.style.opacity = '0';
    }, 100);
    setTimeout(() => p.remove(), 4000);
  }
}

async function typewriter(element, text, speed = 60) {
  for (let char of text) {
    element.innerHTML += char === '\n' ? '<br>' : char;
    await new Promise(r => setTimeout(r, speed));
  }
}

// å€’æ•¸èˆ‡æœ€å¾Œé©šå–œ
function startSequence() {
  const words = ["æº–å‚™â€¦", "ä¾†äº†â€¦", "20 æ­²å¿«æ¨‚ï¼"];
  let i = 0;
  
  contentWrap.innerHTML = ""; // é€™è£¡å¾¹åº•æ¸…ç©ºå¡ç‰‡å…§å®¹ (åŒ…æ‹¬æ¨™é¡Œå’Œå‰¯æ¨™)

  const cd = document.createElement("div");
  cd.className = "countdown";
  contentWrap.appendChild(cd);

  const timer = setInterval(() => {
    if (i < words.length) {
      cd.textContent = words[i];
      vibrate(40);
      i++;
    } else {
      clearInterval(timer);
      
      // é¡¯ç¤º Happy Birthday å™´ç™¼æ–‡å­—
      const bt = document.createElement("div");
      bt.className = "burst-text";
      bt.innerHTML = "ï½¡Ëšâ™¡ğŸ§ HAPPY BIRTHDAY ğŸ§â‹†20ï½¡";
      contentWrap.appendChild(bt);
      
      fireConfetti();
      vibrate([100, 50, 200]);

      // çµæŸå€’æ•¸ï¼Œåˆ‡æ›åˆ°ç¥ç¦æ–‡å­—
      setTimeout(async () => {
        contentWrap.style.display = "none";
        secret.style.display = "block";
        
        await typewriter(document.getElementById('type-title'), "ğŸ‰ æ€¡éœï¼Œ20æ­²ç”Ÿæ—¥å¿«æ¨‚!!");
        await typewriter(document.getElementById('type-content'), 
          "é›–ç„¶å‰›èªè­˜å¦³ä¸ä¹…ï¼ˆé–‹ç©ç¬‘ï¼‰ï¼Œ\né‚„æ˜¯æƒ³ç¥å¦³ç”Ÿæ—¥å¿«æ¨‚ê‰‚à³­(ËµÂ¯Ì´Í’ê‡´Â¯Ì´Í’Ëµ) â€ã€‚\nç¥å¦³å¿ƒæƒ³äº‹æˆï¼Œä¹Ÿè¨˜å¾—é©æ™‚ä¼‘æ¯ï¼Œ\nå·¥ä½œåˆ¥å¤ªç´¯åˆ°è‡ªå·± Ê•â€¢Ì€ o â€¢Ì Ê”ï¼Œ\nä»Šå¤©å¦³æ˜¯æœ€å¹¸ç¦çš„äººï¼Œ\nç¥å¦³ä»Šå¹´ä¹Ÿé †é †åˆ©åˆ©ã€‚");
        
        const sig = document.getElementById('signature');
        sig.style.opacity = "1";
        await typewriter(sig, "â€” by jie");
      }, 2500);
    }
  }, 1200);
}

// ç¬¬ä¸€æ­¥ï¼šé»æ“Šé–‹å§‹
goBtn.addEventListener("click", () => {
  goBtn.style.display = "none";
  bgmLoop.volume = 0.3;
  bgmLoop.play().catch(() => {});

  // å‡ºç¾æ˜Ÿæ˜Ÿ
  const star = document.createElement("div");
  star.className = "click-star";
  contentWrap.appendChild(star);

  // é»æ“Šæ˜Ÿæ˜Ÿå¾Œ
  star.addEventListener("click", () => {
    // é—œéµï¼šé»å®Œæ˜Ÿæ˜Ÿç«‹åˆ»æ¸…ç©º contentWrapï¼Œé€™æœƒç§»é™¤æ¨™é¡Œã€å‰¯æ¨™å’Œæ˜Ÿæ˜Ÿæœ¬äºº
    startSequence();
  });
});
</script>
</body>
</html>
