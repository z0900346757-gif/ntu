<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>æ€¡éœ 20æ­²ç”Ÿæ—¥å¿«æ¨‚ ğŸ‰</title>

<style>
:root { 
  --bg1: #0b1020; 
  --bg2: #1a2a6c; 
  --gold: #fdbb2d;
  --text-primary: #ffffff;
}

* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

body {
  margin: 0;
  min-height: 100vh;
  display: grid;
  place-items: center;
  font-family: system-ui, -apple-system, "Noto Sans TC", "PingFang TC", sans-serif;
  color: var(--text-primary);
  overflow: hidden;
  /* å‹•æ…‹æµå‹•èƒŒæ™¯ */
  background: linear-gradient(-45deg, #0b1020, #1a2a6c, #2b1055, #192236);
  background-size: 400% 400%;
  animation: gradientMove 15s ease infinite;
}

@keyframes gradientMove {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.card {
  width: min(92vw, 500px);
  padding: 35px 25px;
  border-radius: 30px;
  /* æ¯›ç»ç’ƒè³ªæ„Ÿ */
  background: rgba(255, 255, 255, 0.07);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.18);
  box-shadow: 0 25px 50px rgba(0,0,0,0.4);
  position: relative;
  overflow: hidden;
  text-align: center;
  transition: all 0.5s ease;
}

h1 { margin: 0 0 10px; font-size: clamp(28px, 6vw, 42px); letter-spacing: 2px; }
.sub { margin: 0 0 25px; opacity: 0.8; font-size: 15px; line-height: 1.6; }

#go {
  padding: 16px 35px;
  border-radius: 50px;
  border: 0;
  cursor: pointer;
  font-weight: 800;
  font-size: 18px;
  color: #332200;
  background: linear-gradient(45deg, var(--gold), #ff8e53);
  box-shadow: 0 10px 20px rgba(253, 187, 45, 0.3);
  transition: transform 0.2s, opacity 0.5s;
}

#go:active { transform: scale(0.92); }

/* ===== ç¥ç¦å…§å®¹ (æ‰“å­—æ©Ÿæ•ˆæœå€) ===== */
.secret {
  display: none;
  margin-top: 20px;
  padding: 22px;
  border-radius: 20px;
  background: rgba(0, 0, 0, 0.3);
  line-height: 1.8;
  text-align: left;
}

.secret h2 { color: var(--gold); margin-top: 0; font-size: 22px; }

/* ===== äº’å‹•å…ƒç´ ï¼šæ˜Ÿæ˜Ÿ ===== */
.click-star {
  position: relative;
  margin: 40px auto;
  width: 75px;
  height: 75px;
  background: var(--gold);
  clip-path: polygon(50% 0%,61% 35%,98% 35%,68% 57%,79% 91%,50% 70%,21% 91%,32% 57%,2% 35%,39% 35%);
  cursor: pointer;
  animation: star-pulse 1.6s ease-in-out infinite;
  filter: drop-shadow(0 0 15px rgba(253,187,45,0.8));
}

@keyframes star-pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.15); }
}

.hint-arrow {
  font-size: 14px;
  color: var(--gold);
  margin-top: -10px;
  animation: bounce 1s infinite;
}

@keyframes bounce { 0%,100% { transform:translateY(0); } 50% { transform:translateY(-5px); } }

/* ===== å€’æ•¸èˆ‡å™´ç™¼æ–‡å­— ===== */
.countdown {
  position: absolute;
  left: 50%; top: 55%;
  transform: translate(-50%, -50%);
  font-size: 60px; font-weight: 900;
  text-shadow: 0 0 20px var(--gold);
  animation: pop 0.5s ease;
}

@keyframes pop { from { scale: 0.5; opacity: 0; } to { scale: 1; opacity: 1; } }

.burst-text {
  position: absolute;
  top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  width: 100%;
  font-size: 24px; font-weight: bold;
  color: var(--gold);
  text-shadow: 0 0 15px rgba(255,217,102,0.8);
  animation: text-burst 3.5s forwards;
  pointer-events: none;
}

@keyframes text-burst {
  0% { opacity: 0; scale: 0.5; }
  20% { opacity: 1; scale: 1.1; }
  80% { opacity: 1; scale: 1; }
  100% { opacity: 0; transform: translate(-50%, -100%); }
}
</style>
</head>

<body>
<div class="card">
  <div id="header-area">
    <h1>ğŸ‚ ç”Ÿæ—¥å¿«æ¨‚</h1>
    <p class="sub">é€™æ˜¯ä¸€ä»½å°ˆå±¬æ–¼å¦³çš„ 20 æ­²æ•¸ä½é©šå–œ</p>
  </div>

  <button id="go">é–‹å•Ÿç¥ç¦ ğŸµ</button>

  <div id="interactive-content"></div>

  <div class="secret" id="secret">
    <h2 id="type-title"></h2>
    <p style="font-size: 0.85em; opacity: 0.6; margin-bottom: 10px;">2026 / 01 / 20</p>
    <div id="type-content"></div>
    <p id="signature" style="text-align:right; margin-top:15px; font-weight:bold; color:var(--gold); opacity:0;"></p>
  </div>

  <audio id="bgmLoop" src="bg.wav" preload="auto" loop playsinline></audio>
</div>

<script>
const goBtn = document.getElementById("go");
const secret = document.getElementById("secret");
const interactiveArea = document.getElementById("interactive-content");
const card = document.querySelector(".card");
const bgmLoop = document.getElementById("bgmLoop");

let triggered = false;

function vibrate(p) { if(navigator.vibrate) navigator.vibrate(p); }

// 1. ç´™å±‘å™´ç™¼ç‰¹æ•ˆ
function fireConfetti() {
  const colors = ['#fdbb2d', '#ff8e53', '#22c1c3', '#ffffff', '#ffedbc'];
  for (let i = 0; i < 60; i++) {
    const p = document.createElement('div');
    p.style.cssText = `
      position: fixed; left: ${Math.random() * 100}vw; top: -10px;
      width: ${Math.random() * 8 + 5}px; height: ${Math.random() * 12 + 5}px;
      background: ${colors[Math.floor(Math.random() * colors.length)]};
      z-index: 100; opacity: ${Math.random()};
      transform: rotate(${Math.random() * 360}deg);
      pointer-events: none; transition: transform 3s linear, opacity 3s;
    `;
    document.body.appendChild(p);
    setTimeout(() => {
      p.style.transform = `translate(${Math.random() * 100 - 50}px, 105vh) rotate(${Math.random() * 1000}deg)`;
      p.style.opacity = '0';
    }, 100);
    setTimeout(() => p.remove(), 4000);
  }
}

// 2. æ‰“å­—æ©Ÿæ•ˆæœ
async function typewriter(element, text, speed = 80) {
  for (let char of text) {
    element.innerHTML += char === '\n' ? '<br>' : char;
    await new Promise(r => setTimeout(r, speed));
  }
}

// 3. æ ¸å¿ƒå€’æ•¸èˆ‡æ–‡å­—çˆ†ç™¼
function triggerFinalSurprise() {
  const words = ["æº–å‚™â€¦", "ä¾†äº†â€¦", "20æ­²å¿«æ¨‚ï¼"];
  let i = 0;
  const cd = document.createElement("div");
  cd.className = "countdown";
  interactiveArea.appendChild(cd);

  const timer = setInterval(async () => {
    if (i < words.length) {
      cd.textContent = words[i];
      vibrate(40);
      i++;
    } else {
      clearInterval(timer);
      cd.remove();
      
      // é¡¯ç¤ºç¥ç¦å€
      secret.style.display = 'block';
      fireConfetti();
      vibrate([100, 50, 200]);

      // é–‹å§‹æ‰“å­—
      await typewriter(document.getElementById('type-title'), "ğŸ‰ æ€¡éœï¼Œ20æ­²ç”Ÿæ—¥å¿«æ¨‚!!");
      await typewriter(document.getElementById('type-content'), 
        "é›–ç„¶å‰›èªè­˜å¦³ä¸ä¹…ï¼ˆé–‹ç©ç¬‘ï¼‰ï¼Œ\né‚„æ˜¯æƒ³ç¥å¦³ç”Ÿæ—¥å¿«æ¨‚ê‰‚à³­(ËµÂ¯Ì´Í’ê‡´Â¯Ì´Í’Ëµ) â€ã€‚\nç¥å¦³å¿ƒæƒ³äº‹æˆï¼Œä¹Ÿè¨˜å¾—é©æ™‚ä¼‘æ¯ï¼Œ\nå·¥ä½œåˆ¥å¤ªç´¯åˆ°è‡ªå·± Ê•â€¢Ì€ o â€¢Ì Ê”ï¼Œ\nä»Šå¤©å¦³æ˜¯æœ€å¹¸ç¦ã€æœ€å¹¸é‹çš„äººï¼Œ\nç¥å¦³ä»Šå¹´ä¹Ÿé †é †åˆ©åˆ©ã€‚");
      
      const sig = document.getElementById('signature');
      sig.textContent = "â€” by jie";
      sig.style.opacity = "1";
    }
  }, 1200);
}

// 4. ç¬¬ä¸€æ­¥ï¼šé–‹å§‹æŒ‰éˆ•
goBtn.addEventListener("click", () => {
  if (triggered) return;
  triggered = true;
  
  // æŒ‰éˆ•æ¶ˆå¤±
  goBtn.style.opacity = '0';
  setTimeout(() => goBtn.style.display = 'none', 500);

  // éŸ³æ¨‚æ’­æ”¾
  bgmLoop.volume = 0.3;
  bgmLoop.play().catch(() => { console.log("éŸ³æ¨‚æ’­æ”¾å—é˜»ï¼Œéœ€ä½¿ç”¨è€…æ‰‹å‹•è§¸ç™¼"); });

  // é¡¯ç¤ºæ˜Ÿæ˜Ÿ
  const star = document.createElement("div");
  star.className = "click-star";
  const hint = document.createElement("div");
  hint.className = "hint-arrow";
  hint.innerHTML = "é»æ“Šé€™é¡†æ˜Ÿæ˜Ÿ <span>âœ¨</span>";
  
  interactiveArea.appendChild(star);
  interactiveArea.appendChild(hint);

  star.addEventListener("click", () => {
    star.remove();
    hint.remove();
    vibrate(60);
    
    // å™´ç™¼Happy Birthdayæ–‡å­—
    const bt = document.createElement("div");
    bt.className = "burst-text";
    bt.textContent = "ï½¡Ëšâ™¡ğŸ§ HAPPPY BIRTHDAY ğŸ§â‹†20ï½¡";
    interactiveArea.appendChild(bt);
    
    setTimeout(triggerFinalSurprise, 1500);
  });
});
</script>
</body>
</html>
