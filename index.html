<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ç”Ÿæ—¥å¿«æ¨‚ ğŸ‰</title>

<style>
:root { --bg1:#0b1020; --bg2:#1a2a6c; }
*{box-sizing:border-box}

body{
  margin:0;
  min-height:100vh;
  display:grid;
  place-items:center;
  font-family: system-ui, -apple-system, "Noto Sans TC", "PingFang TC", sans-serif;
  color:#fff;
  overflow:hidden;
  background:
    radial-gradient(1200px 600px at 20% 20%, rgba(253,187,45,.35), transparent 60%),
    linear-gradient(135deg, var(--bg1), var(--bg2));
}

.card{
  width:min(92vw, 760px);
  padding:28px 22px;
  border-radius:24px;
  background: rgba(255,255,255,.08);
  border:1px solid rgba(255,255,255,.18);
  box-shadow: 0 20px 60px rgba(0,0,0,.35);
  position:relative;
  overflow:hidden;
}

h1{ margin:0 0 10px; font-size: clamp(34px, 5vw, 56px); }
.sub{ margin:0 0 18px; opacity:.9; line-height:1.7; }

button{
  padding:14px 18px;
  border-radius:14px;
  border:0;
  cursor:pointer;
  font-weight:700;
  font-size:16px;
  background:#fdbb2d;
}

/* ===== éš±è—å€ ===== */
.secret{
  margin-top:18px;
  padding:18px;
  border-radius:18px;
  background: rgba(0,0,0,.25);
  display:none;
  line-height:1.7;
}
.secret.show{ display:block; }

/* ===== å½©å¸¶ ===== */
.confetti{ position:absolute; inset:-10vh -10vw; pointer-events:none; }
.piece{
  position:absolute;
  width:10px;
  height:16px;
  top:-20px;
  animation: fall 3.5s linear infinite;
}
@keyframes fall{
  to{ transform: translateY(120vh) rotate(720deg); }
}

/* ===== æ˜Ÿæ˜Ÿ ===== */
.star{
  position:absolute;
  left:50%;
  top:50%;
  width:10px;
  height:10px;
  background:gold;
  clip-path: polygon(
    50% 0%,61% 35%,98% 35%,68% 57%,79% 91%,
    50% 70%,21% 91%,32% 57%,2% 35%,39% 35%
  );
  pointer-events:none;
  animation: star-burst 1.2s ease-out forwards;
}
@keyframes star-burst{
  from{ transform: translate(-50%,-50%) scale(0.3); opacity:1; }
  to{
    transform: translate(calc(-50% + var(--x)), calc(-50% + var(--y))) scale(1.2);
    opacity:0;
  }
}

/* ===== ç”Ÿæ—¥å¿«æ¨‚æ–‡å­— ===== */
.burst-text{
  position:absolute;
  left:50%;
  top:50%;
  transform: translate(-50%,-50%);
  font-size: clamp(26px, 6vw, 44px);
  font-weight:800;
  color:#ffd966;
  letter-spacing:.08em;
  pointer-events:none;
  text-shadow: 0 0 20px rgba(255,217,102,.8);
  animation: text-burst 5s ease-out forwards;
}
@keyframes text-burst{
  0%{ opacity:0; transform: translate(-50%,-50%) scale(0.6); }
  15%{ opacity:1; transform: translate(-50%,-50%) scale(1.2); }
  70%{ opacity:1; transform: translate(-50%,-50%) scale(1.1); }
  100%{ opacity:0; transform: translate(-50%,-80%) scale(1.1); }
}
</style>
</head>

<body>
<div class="card">
  <div class="confetti" id="confetti"></div>

  <h1>ğŸ‚ ç”Ÿæ—¥å¿«æ¨‚</h1>
  <p class="sub">ä¸€å€‹å°å°çš„20æ­²ç”Ÿæ—¥ç¥ç¦ã€‚<br>é»æ“Šä¸‹æ–¹é–‹å§‹ã€‚</p>

  <button id="go">é–‹å§‹ ğŸµ</button>

  <div class="secret" id="secret">
    <h2>ğŸ‰ æ€¡éœï¼Œ20æ­²ç”Ÿæ—¥å¿«æ¨‚!!</h2>
    <p>
      é›–ç„¶å‰›èªè­˜å¦³ä¸ä¹…ï¼ˆé–‹ç©ç¬‘ï¼‰ï¼Œ<br>
      é‚„æ˜¯æƒ³ç¥å¦³ç”Ÿæ—¥å¿«æ¨‚ã€‚<br>
      ç¥å¦³å¿ƒæƒ³äº‹æˆï¼Œä¹Ÿè¨˜å¾—é©æ™‚ä¼‘æ¯ï¼Œ<br>
      å¸Œæœ›å¦³ä»Šå¤©èƒ½éå¾—é–‹å¿ƒï¼Œ<br>
      ä»Šå¹´ä¹Ÿé †é †åˆ©åˆ©ã€‚<br><br>
      P.S. æœ¬ä¾†æƒ³æ”¾æ—ä¿Šå‚‘çš„æ­Œ(åªèƒ½äº‚å”±å…¶ä»–ã„Œ)ï¼Œ<br>
      by Jie
    </p>
  </div>

  <!-- âœ… ä¸»éŸ³æ¨‚ï¼šä¸€é–‹å§‹å°±æŒ‡å®š srcï¼ˆé—œéµä¿®æ­£ï¼‰ -->
  <audio id="bgmMain" src="song1.wav" preload="auto" playsinline></audio>

  <!-- èƒŒæ™¯éŸ³æ¨‚ -->
  <audio id="bgmLoop" src="bg.wav" preload="auto" loop playsinline></audio>
</div>

<script>
const goBtn = document.getElementById("go");
const secret = document.getElementById("secret");
const confetti = document.getElementById("confetti");
const card = document.querySelector(".card");

const bgmMain = document.getElementById("bgmMain");
const bgmLoop = document.getElementById("bgmLoop");

// GitHub Pages ç›¸å°è·¯å¾‘
const BASE = window.location.pathname.replace(/\/[^\/]*$/, "/");

const playlist = [
  BASE + "song1.wav",
  BASE + "song2.wav",
  BASE + "song3.wav"
];

let current = 0;
let triggered = false;

function starBurst(){
  for(let i=0;i<20;i++){
    const star = document.createElement("div");
    star.className = "star";
    const a = Math.random()*Math.PI*2;
    const d = 60 + Math.random()*120;
    star.style.setProperty("--x", Math.cos(a)*d+"px");
    star.style.setProperty("--y", Math.sin(a)*d+"px");
    card.appendChild(star);
    setTimeout(()=>star.remove(),1300);
  }
}

function textBurst(){
  const t = document.createElement("div");
  t.className = "burst-text";
  t.textContent = "ï½¡Ëšâ™¡ğŸ§ Êœá´€á´˜á´˜Ê Ê™ÉªÊ€á´›Êœá´…á´€Ê ğŸ§â‹†ï½¡Ëš";
  card.appendChild(t);
  setTimeout(()=>t.remove(),5000);
}

goBtn.addEventListener("click", () => {
  if(triggered) return;
  triggered = true;

  starBurst();
  textBurst();
  secret.classList.add("show");

  // èƒŒæ™¯éŸ³æ¨‚
  bgmLoop.volume = 0.25;
  bgmLoop.play().catch(()=>{});

  // ä¸»éŸ³æ¨‚
  bgmMain.src = playlist[current];
  bgmMain.volume = 0.15;
  bgmMain.load();
  bgmMain.play().catch(()=>{});

  // å½©å¸¶
  confetti.innerHTML = "";
  for(let i=0;i<120;i++){
    const p = document.createElement("div");
    p.className = "piece";
    p.style.left = Math.random()*100 + "vw";
    p.style.background = ["#fdbb2d","#ff6b6b","#4dd4ff","#7cff9e"][i%4];
    p.style.animationDelay = Math.random()*1.5 + "s";
    confetti.appendChild(p);
  }
});

// ä¸»éŸ³æ¨‚è¼ªæ’­
bgmMain.addEventListener("ended", () => {
  current = (current + 1) % playlist.length;
  bgmMain.src = playlist[current];
  bgmMain.load();
  bgmMain.play();
});
</script>
</body>
</html>
