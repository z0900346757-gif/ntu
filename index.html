<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>æ€¡éœ 20æ­²ç”Ÿæ—¥å¿«æ¨‚ ğŸ‰</title>

<style>
:root { --bg1: #0b1020; --bg2: #1a2a6c; --gold: #fdbb2d; }
* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

body {
  margin: 0; min-height: 100vh; display: grid; place-items: center;
  font-family: system-ui, -apple-system, "Noto Sans TC", sans-serif;
  color: #fff; overflow: hidden;
  background: linear-gradient(-45deg, #0b1020, #1a2a6c, #2b1055, #192236);
  background-size: 400% 400%;
  animation: gradientMove 15s ease infinite;
}

@keyframes gradientMove { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

.card {
  width: min(92vw, 500px); padding: 40px 25px; border-radius: 30px;
  background: rgba(255, 255, 255, 0.07);
  backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.18);
  box-shadow: 0 25px 50px rgba(0,0,0,0.4);
  position: relative; text-align: center; min-height: 320px;
  display: flex; flex-direction: column; justify-content: center;
}

#main-header h1 { margin: 0 0 10px; font-size: clamp(28px, 6vw, 42px); }
#main-header p { margin: 0 0 30px; opacity: 0.8; }

#go {
  padding: 16px 40px; border-radius: 50px; border: 0; cursor: pointer;
  font-weight: 800; font-size: 18px; color: #332200;
  background: linear-gradient(45deg, var(--gold), #ff8e53);
  align-self: center;
}

.click-star {
  width: 80px; height: 80px; background: var(--gold); margin: 20px auto;
  clip-path: polygon(50% 0%,61% 35%,98% 35%,68% 57%,79% 91%,50% 70%,21% 91%,32% 57%,2% 35%,39% 35%);
  cursor: pointer; animation: star-pulse 1.5s infinite;
}
@keyframes star-pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.15); } }

.countdown { font-size: 50px; font-weight: 900; text-shadow: 0 0 20px var(--gold); animation: pop 0.5s ease; }
@keyframes pop { from { transform: scale(0.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }

.burst-text { font-size: 26px; font-weight: bold; color: var(--gold); margin-bottom: 20px; text-shadow: 0 0 15px rgba(253, 187, 45, 0.5); }

/* è›‹ç³•èˆ‡åƒæ‰å‹•ç•« */
.cake-container { font-size: 80px; cursor: pointer; transition: 0.3s; margin: 15px 0; position: relative; }
.cake-container.eat-anim { animation: eat-sequence 1.2s ease forwards; }

@keyframes eat-sequence {
  0% { transform: scale(1); }
  20% { transform: scale(1.2); } /* å’¬ä¸€å£å‰çš„æ”¾å¤§ */
  40% { transform: scale(0.5); opacity: 0.5; } /* ç¸®å° */
  60% { transform: scale(0); opacity: 0; } /* æ¶ˆå¤± */
  100% { transform: scale(0); opacity: 0; }
}

#yummy-face {
  position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0);
  font-size: 60px; opacity: 0; pointer-events: none;
}
.show-yummy { animation: yummy-pop 1s ease forwards 0.6s; } /* åœ¨è›‹ç³•æ¶ˆå¤±å¾Œå‡ºç¾ */

@keyframes yummy-pop {
  0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
  50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
  100% { transform: translate(-50%, -80%) scale(1); opacity: 0; }
}

.secret { display: none; padding: 10px; line-height: 1.8; text-align: left; }
.secret h2 { color: var(--gold); margin-top: 0; font-size: 24px; }
#signature { text-align: right; margin-top: 15px; font-weight: bold; color: var(--gold); }
</style>
</head>

<body>
<div class="card">
  <div id="content-wrap">
    <div id="main-header">
      <h1>ğŸ‚ ç”Ÿæ—¥å¿«æ¨‚</h1>
      <p>ä¸€å€‹å°å°çš„ 20 æ­²ç”Ÿæ—¥ç¥ç¦ã€‚</p>
    </div>
    <button id="go">é»æ“Šé–‹å•Ÿ ğŸµ</button>
  </div>

  <div class="secret" id="secret">
    <h2 id="type-title"></h2>
    <p style="font-size: 0.85em; opacity: 0.6; margin-bottom: 10px;">2026 / 01 / 20</p>
    <div id="type-content"></div>
    <p id="signature"></p>
  </div>

  <audio id="bgmLoop" src="bg.wav" preload="auto" loop playsinline></audio>
</div>

<script>
const goBtn = document.getElementById("go");
const contentWrap = document.getElementById("content-wrap");
const secret = document.getElementById("secret");
const bgmLoop = document.getElementById("bgmLoop");

function vibrate(p) { if(navigator.vibrate) navigator.vibrate(p); }

function fireConfetti() {
  const colors = ['#fdbb2d', '#ff8e53', '#22c1c3', '#ffffff'];
  for (let i = 0; i < 40; i++) {
    const p = document.createElement('div');
    p.style.cssText = `position:fixed; left:${Math.random()*100}vw; top:-10px; width:8px; height:12px; background:${colors[Math.floor(Math.random()*colors.length)]}; z-index:100; opacity:${Math.random()}; transform:rotate(${Math.random()*360}deg); pointer-events:none; transition:transform 3s linear, opacity 3s;`;
    document.body.appendChild(p);
    setTimeout(() => { p.style.transform = `translate(${Math.random()*100-50}px, 105vh) rotate(${Math.random()*1000}deg)`; p.style.opacity = '0'; }, 100);
    setTimeout(() => p.remove(), 4000);
  }
}

async function typewriter(element, text, speed = 60) {
  for (let char of text) {
    element.innerHTML += char === '\n' ? '<br>' : char;
    await new Promise(r => setTimeout(r, speed));
  }
}

// è¨±é¡˜ç’°ç¯€
function startWishing() {
  contentWrap.innerHTML = `
    <div style="animation: fadeIn 1s ease;">
      <div class="burst-text">ï½¡Ëšâ™¡ğŸ§ HAPPY BIRTHDAY ğŸ§â‹†20ï½¡</div>
      <p style="margin-bottom:5px; font-size: 18px;">è¨±ä¸‹ä¸‰å€‹é¡˜æœ›...</p>
      <div class="cake-container" id="cake-box">
        <span id="cake-emoji">ğŸ‚</span>
        <div id="yummy-face">ğŸ˜‹</div>
      </div>
      <p style="font-size:13px; opacity:0.6;">(è¨±å®Œé¡˜å¾Œï¼Œé»æ“Šè›‹ç³•åƒæ‰å®ƒï¼)</p>
    </div>
  `;
  
  const cakeBox = document.getElementById('cake-box');
  const cakeEmoji = document.getElementById('cake-emoji');
  const yummyFace = document.getElementById('yummy-face');

  cakeBox.addEventListener('click', function() {
    // 1. è®Šåˆ‡ç‰‡
    cakeEmoji.innerHTML = "ğŸ°"; 
    vibrate(60);

    // 2. å•Ÿå‹•åƒæ‰å‹•ç•«
    setTimeout(() => {
      cakeBox.classList.add('eat-anim');
      yummyFace.classList.add('show-yummy');
      vibrate([50, 30, 50]);
    }, 400);

    // 3. å‹•ç•«çµæŸå¾Œé€²å…¥ç¥ç¦
    setTimeout(showFinalSecret, 1800);
  }, { once: true }); // ç¢ºä¿åªèƒ½é»ä¸€æ¬¡
}

async function showFinalSecret() {
  contentWrap.style.display = "none";
  secret.style.display = "block";
  await typewriter(document.getElementById('type-title'), "ğŸ‰ æ€¡éœï¼Œ20æ­²ç”Ÿæ—¥å¿«æ¨‚!!");
  await typewriter(document.getElementById('type-content'), 
    "é›–ç„¶å‰›èªè­˜å¦³ä¸ä¹…ï¼ˆé–‹ç©ç¬‘ï¼‰ï¼Œ\né‚„æ˜¯æƒ³ç¥å¦³ç”Ÿæ—¥å¿«æ¨‚ê‰‚à³­(ËµÂ¯Ì´Í’ê‡´Â¯Ì´Í’Ëµ) â€ã€‚\nç¥å¦³å¿ƒæƒ³äº‹æˆï¼Œä¹Ÿè¨˜å¾—é©æ™‚ä¼‘æ¯ï¼Œ\nå·¥ä½œåˆ¥å¤ªç´¯åˆ°è‡ªå·± Ê•â€¢Ì€ o â€¢Ì Ê”ï¼Œ\nä»Šå¤©å¦³æ˜¯æœ€å¹¸ç¦çš„äººï¼Œ\nç¥å¦³ä»Šå¹´ä¹Ÿé †é †åˆ©åˆ©ã€‚");
  const sig = document.getElementById('signature');
  await typewriter(sig, "â€” by jie");
}

function startSequence() {
  const words = ["æº–å‚™â€¦", "ä¾†äº†â€¦", "20 æ­²å¿«æ¨‚ï¼"];
  let i = 0;
  contentWrap.innerHTML = ""; 

  const cd = document.createElement("div");
  cd.className = "countdown";
  contentWrap.appendChild(cd);

  const timer = setInterval(() => {
    if (i < words.length) {
      cd.textContent = words[i];
      vibrate(40);
      i++;
    } else {
      clearInterval(timer);
      contentWrap.innerHTML = ""; 
      fireConfetti();
      startWishing(); 
    }
  }, 1200);
}

goBtn.addEventListener("click", () => {
  goBtn.style.display = "none";
  bgmLoop.volume = 0.3;
  bgmLoop.play().catch(() => {});
  const star = document.createElement("div");
  star.className = "click-star";
  contentWrap.appendChild(star);
  star.addEventListener("click", () => {
    startSequence(); 
  });
});
</script>
</body>
</html>
